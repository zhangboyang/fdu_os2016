#ifndef _MACH_MAILBOX_H
#define _MACH_MAILBOX_H

#include <mach-platform.h>

#define BCM2836_MEMIO_BASE 0x40000000

// see QA7_rev3.4.pdf

#define BCM2836_LOCAL_PERIPHERAL_OFFSET 0x40000000

// Timers interrupt control registers
#define CORE0_TIMER_IRQCNTL (0x40000040 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_TIMER_IRQCNTL (0x40000044 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_TIMER_IRQCNTL (0x40000048 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_TIMER_IRQCNTL (0x4000004C - BCM2836_LOCAL_PERIPHERAL_OFFSET)
// Where to route timer interrupt to, IRQ/FIQ
// Setting both the IRQ and FIQ bit gives an FIQ
#define TIMER0_IRQ 0x01
#define TIMER1_IRQ 0x02
#define TIMER2_IRQ 0x04
#define TIMER3_IRQ 0x08
#define TIMER0_FIQ 0x10
#define TIMER1_FIQ 0x20
#define TIMER2_FIQ 0x40
#define TIMER3_FIQ 0x80
// Mailbox interrupt control registers
#define CORE0_MBOX_IRQCNTL (0x40000050 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_MBOX_IRQCNTL (0x40000054 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_MBOX_IRQCNTL (0x40000058 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_MBOX_IRQCNTL (0x4000005C - BCM2836_LOCAL_PERIPHERAL_OFFSET)
// Where to route mailbox interrupt to, IRQ/FIQ
// Setting both the IRQ and FIQ bit gives an FIQ
#define MBOX0_IRQ 0x01
#define MBOX1_IRQ 0x02
#define MBOX2_IRQ 0x04
#define MBOX3_IRQ 0x08
#define MBOX0_FIQ 0x10
#define MBOX1_FIQ 0x20
#define MBOX2_FIQ 0x40
#define MBOX3_FIQ 0x80
// IRQ & FIQ source registers
#define CORE0_IRQ_SOURCE (0x40000060 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_IRQ_SOURCE (0x40000064 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_IRQ_SOURCE (0x40000068 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_IRQ_SOURCE (0x4000006C - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE0_FIQ_SOURCE (0x40000070 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_FIQ_SOURCE (0x40000074 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_FIQ_SOURCE (0x40000078 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_FIQ_SOURCE (0x4000007C - BCM2836_LOCAL_PERIPHERAL_OFFSET)
// Interrupt source bits
// IRQ and FIQ are the same
// GPU bits can be set for one core only
#define INT_SRC_TIMER0 0x00000001
#define INT_SRC_TIMER1 0x00000002
#define INT_SRC_TIMER2 0x00000004
#define INT_SRC_TIMER3 0x00000008
#define INT_SRC_MBOX0 0x00000010
#define INT_SRC_MBOX1 0x00000020
#define INT_SRC_MBOX2 0x00000040
#define INT_SRC_MBOX3 0x00000080
#define INT_SRC_GPU 0x00000100
#define INT_SRC_PMU 0x00000200
// Mailbox write-set registers (Write only)
#define CORE0_MBOX0_SET (0x40000080 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE0_MBOX1_SET (0x40000084 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE0_MBOX2_SET (0x40000088 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE0_MBOX3_SET (0x4000008C - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_MBOX0_SET (0x40000090 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_MBOX1_SET (0x40000094 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_MBOX2_SET (0x40000098 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_MBOX3_SET (0x4000009C - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_MBOX0_SET (0x400000A0 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_MBOX1_SET (0x400000A4 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_MBOX2_SET (0x400000A8 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_MBOX3_SET (0x400000AC - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_MBOX0_SET (0x400000B0 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_MBOX1_SET (0x400000B4 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_MBOX2_SET (0x400000B8 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_MBOX3_SET (0x400000BC - BCM2836_LOCAL_PERIPHERAL_OFFSET)
// Mailbox write-clear registers (Read & Write)
#define CORE0_MBOX0_RDCLR (0x400000C0 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE0_MBOX1_RDCLR (0x400000C4 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE0_MBOX2_RDCLR (0x400000C8 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE0_MBOX3_RDCLR (0x400000CC - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_MBOX0_RDCLR (0x400000D0 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_MBOX1_RDCLR (0x400000D4 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_MBOX2_RDCLR (0x400000D8 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE1_MBOX3_RDCLR (0x400000DC - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_MBOX0_RDCLR (0x400000E0 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_MBOX1_RDCLR (0x400000E4 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_MBOX2_RDCLR (0x400000E8 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE2_MBOX3_RDCLR (0x400000EC - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_MBOX0_RDCLR (0x400000F0 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_MBOX1_RDCLR (0x400000F4 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_MBOX2_RDCLR (0x400000F8 - BCM2836_LOCAL_PERIPHERAL_OFFSET)
#define CORE3_MBOX3_RDCLR (0x400000FC - BCM2836_LOCAL_PERIPHERAL_OFFSET)


#endif
